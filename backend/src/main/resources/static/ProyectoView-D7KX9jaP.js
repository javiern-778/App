import{r as w,w as P,c as i,o as n,a as o,t as r,b as _,d as b,e as v,v as g,n as x,f as C,g as F,h as I,i as V,j as E,F as L,k as N}from"./index-CujMdd7K.js";const S={class:"card p-4 shadow-sm rounded mt-3",style:{"max-width":"600px",margin:"auto"}},D={class:"mb-4"},U={class:"mb-3"},j={key:0,class:"invalid-feedback"},O={class:"mb-3"},T={key:0,class:"invalid-feedback"},z={class:"row g-3 mb-3"},B={class:"col-md-6"},M={key:0,class:"invalid-feedback"},A={class:"col-md-6"},R={key:0,class:"invalid-feedback"},G={class:"mb-4"},Y={key:0,class:"invalid-feedback"},q={class:"d-flex gap-2"},H={type:"submit",class:"btn btn-primary flex-grow-1"},$={__name:"ProyectoForm",props:{proyectoEdit:{type:Object,default:()=>null}},emits:["saved","cancel"],setup(k,{emit:f}){const m=k,u=f,e=w({id:null,nombre:"",descripcion:"",fechaInicio:"",fechaFin:"",estado:""}),t=w({nombre:"",descripcion:"",fechaInicio:"",fechaFin:"",estado:""});P(()=>m.proyectoEdit,a=>{a?Object.assign(e,a):h(),y()},{immediate:!0});function h(){e.id=null,e.nombre="",e.descripcion="",e.fechaInicio="",e.fechaFin="",e.estado=""}function y(){for(const a in t)t[a]=""}function c(){y();let a=!0;return e.nombre.trim()||(t.nombre="El nombre es obligatorio.",a=!1),e.descripcion.trim()||(t.descripcion="La descripción es obligatoria.",a=!1),e.fechaInicio||(t.fechaInicio="La fecha de inicio es obligatoria.",a=!1),e.fechaFin||(t.fechaFin="La fecha de fin es obligatoria.",a=!1),e.fechaInicio&&e.fechaFin&&e.fechaFin<e.fechaInicio&&(t.fechaFin="La fecha de fin no puede ser anterior a la fecha de inicio.",a=!1),e.estado.trim()||(t.estado="El estado es obligatorio.",a=!1),a}async function p(){if(c())try{e.id?(await F.put(`/proyectos/${e.id}`,e),alert("Proyecto actualizado correctamente")):(await F.post("/proyectos",e),alert("Proyecto guardado correctamente")),h(),u("saved")}catch(a){console.error(a),alert("Error al guardar el proyecto")}}function l(){h(),y(),u("cancel")}return(a,s)=>(n(),i("div",S,[o("h5",D,r(e.id?"Editar Proyecto":"Registrar Proyecto"),1),o("form",{onSubmit:C(p,["prevent"]),novalidate:""},[o("div",U,[s[5]||(s[5]=o("label",{for:"nombre",class:"form-label"},[v("Nombre "),o("span",{class:"text-danger"},"*")],-1)),_(o("input",{id:"nombre","onUpdate:modelValue":s[0]||(s[0]=d=>e.nombre=d),type:"text",class:x(["form-control",{"is-invalid":t.nombre}]),placeholder:"Nombre del proyecto"},null,2),[[g,e.nombre]]),t.nombre?(n(),i("div",j,r(t.nombre),1)):b("",!0)]),o("div",O,[s[6]||(s[6]=o("label",{for:"descripcion",class:"form-label"},[v("Descripción "),o("span",{class:"text-danger"},"*")],-1)),_(o("textarea",{id:"descripcion","onUpdate:modelValue":s[1]||(s[1]=d=>e.descripcion=d),class:x(["form-control",{"is-invalid":t.descripcion}]),rows:"3",placeholder:"Descripción del proyecto"},null,2),[[g,e.descripcion]]),t.descripcion?(n(),i("div",T,r(t.descripcion),1)):b("",!0)]),o("div",z,[o("div",B,[s[7]||(s[7]=o("label",{for:"fechaInicio",class:"form-label"},[v("Fecha de Inicio "),o("span",{class:"text-danger"},"*")],-1)),_(o("input",{id:"fechaInicio","onUpdate:modelValue":s[2]||(s[2]=d=>e.fechaInicio=d),type:"date",class:x(["form-control",{"is-invalid":t.fechaInicio}])},null,2),[[g,e.fechaInicio]]),t.fechaInicio?(n(),i("div",M,r(t.fechaInicio),1)):b("",!0)]),o("div",A,[s[8]||(s[8]=o("label",{for:"fechaFin",class:"form-label"},[v("Fecha de Fin "),o("span",{class:"text-danger"},"*")],-1)),_(o("input",{id:"fechaFin","onUpdate:modelValue":s[3]||(s[3]=d=>e.fechaFin=d),type:"date",class:x(["form-control",{"is-invalid":t.fechaFin}])},null,2),[[g,e.fechaFin]]),t.fechaFin?(n(),i("div",R,r(t.fechaFin),1)):b("",!0)])]),o("div",G,[s[9]||(s[9]=o("label",{for:"estado",class:"form-label"},[v("Estado "),o("span",{class:"text-danger"},"*")],-1)),_(o("input",{id:"estado","onUpdate:modelValue":s[4]||(s[4]=d=>e.estado=d),type:"text",class:x(["form-control",{"is-invalid":t.estado}]),placeholder:"Estado del proyecto"},null,2),[[g,e.estado]]),t.estado?(n(),i("div",Y,r(t.estado),1)):b("",!0)]),o("div",q,[o("button",H,r(e.id?"Actualizar":"Guardar"),1),e.id?(n(),i("button",{key:0,type:"button",class:"btn btn-secondary flex-grow-1",onClick:l}," Cancelar ")):b("",!0)])],32)]))}},J={class:"container mt-4",style:{"max-width":"900px"}},K={key:0,class:"list-group mt-4"},Q={class:"mb-1"},W={class:"mb-1"},X={class:"text-muted"},Z={class:"btn-group btn-group-sm",role:"group"},ee=["onClick"],oe=["onClick"],te={key:1,class:"text-center text-muted"},se={__name:"ProyectoList",setup(k){const f=I([]),m=I(null),u=async()=>{try{const c=await F.get("/proyectos");f.value=c.data}catch(c){console.error("Error al cargar proyectos:",c)}},e=()=>{m.value=null,u()},t=c=>{m.value={...c}},h=()=>{m.value=null},y=async c=>{if(confirm("¿Estás seguro de eliminar este proyecto?"))try{await F.delete(`/proyectos/${c}`),alert("Proyecto eliminado correctamente"),u()}catch(p){console.error(p),alert("Error al eliminar el proyecto")}};return V(()=>{u()}),(c,p)=>(n(),i("div",J,[p[0]||(p[0]=o("h5",{class:"mb-3"},"LISTA DE PROYECTOS",-1)),E($,{proyectoEdit:m.value,onSaved:e,onCancel:h},null,8,["proyectoEdit"]),f.value.length?(n(),i("ul",K,[(n(!0),i(L,null,N(f.value,l=>(n(),i("li",{key:l.id,class:"list-group-item shadow-sm rounded mb-2 d-flex justify-content-between align-items-start"},[o("div",null,[o("h6",Q,r(l.nombre),1),o("p",W,r(l.descripcion),1),o("small",X,r(l.fechaInicio)+" - "+r(l.fechaFin)+" | Estado: "+r(l.estado),1)]),o("div",Z,[o("button",{class:"btn btn-outline-primary",onClick:a=>t(l)}," Editar ",8,ee),o("button",{class:"btn btn-outline-danger",onClick:a=>y(l.id)}," Eliminar ",8,oe)])]))),128))])):(n(),i("p",te,"No hay proyectos registrados."))]))}},ae={class:"container mt-4"},ne={__name:"ProyectoView",setup(k){return(f,m)=>(n(),i("div",ae,[E($),E(se)]))}};export{ne as default};
