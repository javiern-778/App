import{r as k,w,c as f,a as t,t as l,b,v as p,f as C,o as d,g as _,h as T,i as F,l as x,d as V,F as L,k as q,_ as M,j as y,m as $}from"./index-CujMdd7K.js";const U={class:"card p-4 shadow-sm rounded mb-4"},B={class:"mb-3"},S={class:"mb-3"},j={class:"mb-3"},D={class:"mb-3"},N={class:"mb-3"},z={class:"mb-3"},A={type:"submit",class:"btn btn-success"},E={__name:"TutoriaForm",props:{tutoriaEdit:Object},emits:["form-enviado","cancelar-edicion"],setup(h,{emit:e}){const u=h,i=e,a=k({id:null,motivo:"",fecha:"",hora:"",area:"",comentarios:""});w(()=>u.tutoriaEdit,n=>{n&&Object.assign(a,n)},{immediate:!0});const v=async()=>{try{a.id?(await _.put(`/tutorias/${a.id}`,a),alert("Tutoría actualizada correctamente")):(await _.post("/tutorias",a),alert("Tutoría registrada correctamente")),i("form-enviado"),c()}catch(n){alert("Error al guardar la tutoría"),console.error(n)}},c=()=>{a.id=null,a.motivo="",a.fecha="",a.hora="",a.area="",a.comentarios=""},m=()=>{c(),i("cancelar-edicion")};return(n,o)=>(d(),f("div",U,[t("h4",B,l(a.id?"Editar Tutoría":"Registrar Tutoría"),1),t("form",{onSubmit:C(v,["prevent"])},[t("div",S,[o[5]||(o[5]=t("label",{class:"form-label"},"Motivo",-1)),b(t("input",{"onUpdate:modelValue":o[0]||(o[0]=r=>a.motivo=r),type:"text",class:"form-control",required:""},null,512),[[p,a.motivo]])]),t("div",j,[o[6]||(o[6]=t("label",{class:"form-label"},"Fecha",-1)),b(t("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>a.fecha=r),type:"date",class:"form-control",required:""},null,512),[[p,a.fecha]])]),t("div",D,[o[7]||(o[7]=t("label",{class:"form-label"},"Hora",-1)),b(t("input",{"onUpdate:modelValue":o[2]||(o[2]=r=>a.hora=r),type:"time",class:"form-control",required:""},null,512),[[p,a.hora]])]),t("div",N,[o[8]||(o[8]=t("label",{class:"form-label"},"Área",-1)),b(t("input",{"onUpdate:modelValue":o[3]||(o[3]=r=>a.area=r),type:"text",class:"form-control",required:""},null,512),[[p,a.area]])]),t("div",z,[o[9]||(o[9]=t("label",{class:"form-label"},"Comentarios",-1)),b(t("textarea",{"onUpdate:modelValue":o[4]||(o[4]=r=>a.comentarios=r),class:"form-control",rows:"3"},null,512),[[p,a.comentarios]])]),t("button",A,l(a.id?"Actualizar":"Guardar"),1),t("button",{type:"button",class:"btn btn-secondary ms-2",onClick:m},"Cancelar")],32)]))}},G={class:"container mt-3"},H={class:"table table-bordered table-hover"},O=["onClick"],I=["onClick"],R={__name:"TutoriaList",setup(h){const e=T([]),u=T(!1),i=T(null),a=async()=>{try{const o=await _.get("/tutorias");e.value=o.data}catch(o){alert("Error al cargar las tutorías"),console.error(o)}},v=o=>{i.value={...o},u.value=!0},c=async o=>{if(confirm("¿Seguro que deseas eliminar esta tutoría?"))try{await _.delete(`/tutorias/${o}`),alert("Tutoría eliminada correctamente"),a()}catch(r){alert("Error al eliminar la tutoría"),console.error(r)}},m=()=>{a(),n()},n=()=>{u.value=!1,i.value=null};return F(a),(o,r)=>(d(),f("div",G,[u.value?(d(),x(E,{key:0,tutoriaEdit:i.value,onFormEnviado:m,onCancelarEdicion:n},null,8,["tutoriaEdit"])):V("",!0),r[1]||(r[1]=t("h4",{class:"mt-4"},"Lista de Tutorías",-1)),t("table",H,[r[0]||(r[0]=t("thead",{class:"table-success"},[t("tr",null,[t("th",null,"ID"),t("th",null,"Motivo"),t("th",null,"Fecha"),t("th",null,"Hora"),t("th",null,"Área"),t("th",null,"Comentarios"),t("th",null,"Acciones")])],-1)),t("tbody",null,[(d(!0),f(L,null,q(e.value,s=>(d(),f("tr",{key:s.id},[t("td",null,l(s.id),1),t("td",null,l(s.motivo),1),t("td",null,l(s.fecha),1),t("td",null,l(s.hora),1),t("td",null,l(s.area),1),t("td",null,l(s.comentarios),1),t("td",null,[t("button",{class:"btn btn-sm btn-primary",onClick:g=>v(s)},"Editar",8,O),t("button",{class:"btn btn-sm btn-danger ms-1",onClick:g=>c(s.id)},"Eliminar",8,I)])]))),128))])])]))}},J={components:{TutoriaForm:E,TutoriaList:R}},K={class:"container mt-4"};function P(h,e,u,i,a,v){const c=$("TutoriaForm"),m=$("TutoriaList");return d(),f("div",K,[e[0]||(e[0]=t("h1",{class:"mb-4"},"Gestión de Tutorías",-1)),y(c),e[1]||(e[1]=t("hr",null,null,-1)),y(m)])}const W=M(J,[["render",P]]);export{W as default};
